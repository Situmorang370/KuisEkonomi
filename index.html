<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Kuis Teori Ekonomi Pra-Klasik</title>
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />
<style>
  :root {
      --primary-color: #4CAF50;
      --secondary-color: #2e7d32;
      --bg-color: #f0f2f5;
      --card-bg: #ffffff;
      --text-color: #333;
      --placeholder-color: #999;
      --shadow-light: 0 4px 15px rgba(0, 0, 0, 0.1);
  }
  body {
      font-family: 'Poppins', sans-serif;
      background-color: var(--bg-color);
      color: var(--text-color);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      text-align: center;
  }
  .container {
      background: var(--card-bg);
      padding: 30px;
      border-radius: 12px;
      box-shadow: var(--shadow-light);
      max-width: 500px;
      width: 90%;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: center;
  }
  h2 {
      color: var(--primary-color);
      margin-bottom: 20px;
  }
  input {
      width: 100%;
      padding: 12px;
      margin: 8px 0;
      border-radius: 8px;
      border: 1px solid #ddd;
      font-size: 1em;
      box-sizing: border-box;
  }
  button {
      background: var(--primary-color);
      color: white;
      border: none;
      padding: 14px 30px;
      border-radius: 8px;
      font-size: 1.1em;
      cursor: pointer;
      margin-top: 10px;
      font-weight: 600;
      transition: background-color 0.3s ease;
  }
  button:hover:not(:disabled) {
      background: var(--secondary-color);
  }
  button:disabled {
      background: #ccc;
      cursor: not-allowed;
  }
  .question {
      font-weight: 600;
      font-size: 1.2em;
      margin-bottom: 20px;
      text-align: left;
      width: 100%;
  }
  .options {
      display: flex;
      flex-direction: column;
      gap: 12px;
      width: 100%;
      margin-bottom: 20px;
  }
  .option-btn {
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 8px;
      background: #fafafa;
      cursor: pointer;
      text-align: left;
      font-size: 1em;
      color: #333;
      transition: background-color 0.3s ease;
  }
  .option-btn:hover:not(:disabled) {
      background: #e9e9e9;
      border-color: #999;
  }
  .option-btn:disabled {
      cursor: not-allowed;
      opacity: 0.7;
  }
  .feedback {
      font-weight: 700;
      font-size: 1.1em;
      margin-bottom: 20px;
  }
  .correct {
      color: #28a745;
  }
  .incorrect {
      color: #dc3545;
  }
  .correct-answer {
      background-color: #81C784 !important;
      border-color: #4CAF50 !important;
      color: #333 !important;
  }
  .incorrect-answer {
      background-color: #E57373 !important;
      border-color: #F44336 !important;
      color: #333 !important;
  }
  #review-nav {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 20px;
  }
  #review-nav button {
      width: 120px;
  }
  #error-msg {
      color: #dc3545;
      font-weight: 600;
      margin-top: 10px;
      display: none;
  }

  @media screen and (max-width: 600px) {
      .container {
          padding: 25px;
          width: 95%;
      }
      h2 {
          font-size: 1.5em;
      }
      .question {
          font-size: 1em;
      }
      .option-btn {
          font-size: 0.9em;
      }
  }
</style>
</head>
<body>

<div class="container" id="start-page">
  <h2>Selamat Datang</h2>
  <p>Silakan isi data diri Anda untuk memulai kuis.</p>
  <input type="text" id="nama" placeholder="Nama Lengkap" />
  <input type="email" id="email" placeholder="Email" />
  <input type="text" id="nim" placeholder="NIM (minimal 8 karakter)" />
  <input type="text" id="kelas" placeholder="Kelas" />
  <div id="error-msg"></div>
  <button id="start-btn">Mulai Kuis</button>
</div>

<div class="container" id="quiz-container" style="display:none;">
  <h2>Kuis Teori Ekonomi Pra-Klasik</h2>
  <div class="question" id="question-text"></div>
  <div class="options" id="options-container"></div>
  <div class="feedback" id="feedback"></div>
  <div id="review-nav" style="display:none;">
    <button id="prev-btn">⬅️ Sebelumnya</button>
    <button id="next-btn">Selanjutnya ➡️</button>
  </div>
</div>

<div class="container" id="result-container" style="display:none;">
  <h3>Hasil Kuis</h3>
  <p>Skor Anda: <span id="score"></span> dari <span id="total"></span></p>
  <p>Jawaban Salah: <span id="wrong"></span></p>
  <p id="submission-status" style="color:#777; font-style: italic;">Menyimpan data...</p>
  <button id="review-btn">Tinjau Jawaban</button>
  <button id="restart-btn">Mulai Kuis Lagi</button>
</div>

<script>
  // PENTING: Ganti dengan URL Apps Script Anda
  const WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbxt_6seVW8nNujAK6jRorBWYfvz8KBhQQ4IQzD6g6juzbJ82SyeP3SPEWw0rHk3f1GotA/exec';
  
  const startPage = document.getElementById('start-page');
  const quizContainer = document.getElementById('quiz-container');
  const resultContainer = document.getElementById('result-container');
  const questionText = document.getElementById('question-text');
  const optionsContainer = document.getElementById('options-container');
  const feedback = document.getElementById('feedback');
  const reviewNav = document.getElementById('review-nav');
  const prevBtn = document.getElementById('prev-btn');
  const nextBtn = document.getElementById('next-btn');
  const submissionStatus = document.getElementById('submission-status');
  const scoreSpan = document.getElementById('score');
  const totalSpan = document.getElementById('total');
  const wrongSpan = document.getElementById('wrong');
  const reviewBtn = document.getElementById('review-btn');
  const restartBtn = document.getElementById('restart-btn');
  const errorMsg = document.getElementById('error-msg');

  const namaInput = document.getElementById('nama');
  const emailInput = document.getElementById('email');
  const nimInput = document.getElementById('nim');
  const kelasInput = document.getElementById('kelas');
  const startBtn = document.getElementById('start-btn');

  let studentData = {};
  let currentQuestionIndex = 0;
  let score = 0;
  let wrong = 0;
  let userAnswers = [];
  let isReviewMode = false;

  const questions = [
    {
      question: "Tokoh merkantilisme menekankan surplus perdagangan sebagai sumber kekayaan negara, sedangkan fisiokrat menekankan sektor pertanian. Jika kedua aliran tersebut dihadapkan pada kondisi modern Indonesia yang kaya sumber daya alam namun impor pangan masih tinggi, maka perbedaan pandangan mereka akan terlihat pada…",
      options: [
        "Merkantilis mendukung impor besar-besaran, fisiokrat menekankan ekspor hasil industri.",
        "Merkantilis menolak ekspor hasil pertanian, fisiokrat mendukung impor pangan murah.",
        "Merkantilis mendorong proteksi industri dan perdagangan, fisiokrat mendorong optimalisasi sektor pertanian.",
        "Keduanya sama-sama menekankan liberalisasi perdagangan internasional."
      ],
      answer: "Merkantilis mendorong proteksi industri dan perdagangan, fisiokrat mendorong optimalisasi sektor pertanian."
    },
    {
      question: "Jika pemerintah saat ini menaikkan tarif impor beras untuk melindungi petani lokal, maka berdasarkan teori pra-klasik, kebijakan tersebut lebih sesuai dengan pemikiran…",
      options: [
        "Merkantilisme, karena mendukung surplus perdagangan lewat proteksi.",
        "Fisiokrat, karena mendorong pertanian menjadi sumber kekayaan sejati.",
        "Merkantilisme, karena fokus pada perdagangan logam mulia.",
        "Pemikir individual, karena menekankan rasionalitas konsumen."
      ],
      answer: "Merkantilisme, karena mendukung surplus perdagangan lewat proteksi."
    },
    {
      question: "Thomas Aquinas menekankan “harga yang adil” sebagai prinsip ekonomi. Dalam konteks ekonomi digital saat ini, prinsip ini paling relevan jika diterapkan pada…",
      options: [
        "Penetapan harga saham di bursa efek.",
        "Pengawasan harga obat esensial oleh pemerintah.",
        "Persaingan harga tiket online oleh aplikasi travel.",
        "Mekanisme lelang barang antik."
      ],
      answer: "Pengawasan harga obat esensial oleh pemerintah."
    },
    {
      question: "David Hume mengkritik merkantilisme karena penumpukan logam mulia berlebih dapat menimbulkan inflasi. Jika fenomena serupa terjadi ketika cadangan devisa suatu negara meningkat drastis, maka kelemahan merkantilisme yang tampak adalah…",
      options: [
        "Keseimbangan neraca pembayaran otomatis stabil.",
        "Logam mulia tidak selalu menjamin stabilitas harga.",
        "Inflasi dapat ditekan dengan memperbesar ekspor.",
        "Kekayaan negara hanya ditentukan oleh produktivitas pertanian."
      ],
      answer: "Logam mulia tidak selalu menjamin stabilitas harga."
    },
    {
      question: "Bayangkan kamu adalah penasihat ekonomi pada masa pra-klasik. Negara sedang menghadapi defisit perdagangan dan hasil pertanian rendah. Jika kamu harus menggabungkan prinsip merkantilisme dan fisiokrat, kebijakan yang paling logis adalah…",
      options: [
        "Membatasi impor barang mewah, sekaligus memberikan insentif besar pada sektor pertanian.",
        "Meningkatkan ekspor pertanian dengan cara menurunkan tarif impor pangan.",
        "Mengutamakan perdagangan bebas sembari membatasi kepemilikan tanah.",
        "Fokus hanya pada pertanian sebagai satu-satunya sumber kekayaan negara."
      ],
      answer: "Membatasi impor barang mewah, sekaligus memberikan insentif besar pada sektor pertanian."
    },
    {
      question: "Plato memandang pembagian kerja penting untuk mencapai keadilan sosial. Dalam konteks industri modern, gagasan ini sejalan dengan…",
      options: [
        "Spesialisasi pekerjaan dalam lini produksi pabrik.",
        "Kebijakan proteksi perdagangan internasional.",
        "Praktik monopoli perusahaan besar.",
        "Kebijakan pajak tunggal pada pemilik tanah."
      ],
      answer: "Spesialisasi pekerjaan dalam lini produksi pabrik."
    },
    {
      question: "Aristoteles menolak praktik riba karena dianggap tidak etis. Jika diterapkan sekarang, pandangannya paling dekat dengan…",
      options: [
        "Kebijakan subsidi pupuk bagi petani.",
        "Larangan bunga berlebihan pada pinjaman online.",
        "Regulasi harga BBM bersubsidi.",
        "Pajak progresif bagi pemilik tanah luas."
      ],
      answer: "Larangan bunga berlebihan pada pinjaman online."
    },
    {
      question: "Quesnay menolak kebijakan proteksi Colbert karena membuat barang-barang lebih mahal. Pandangan ini menunjukkan bahwa fisiokrat…",
      options: [
        "Mendukung monopoli dagang internasional.",
        "Menyukai pajak ganda bagi industri mewah.",
        "Lebih pro pada kebebasan pasar dibanding intervensi pemerintah.",
        "Menolak pertanian sebagai sumber kekayaan sejati."
      ],
      answer: "Lebih pro pada kebebasan pasar dibanding intervensi pemerintah."
    },
    {
      question: "Pemikiran pra-klasik sering dianggap belum mandiri sebagai ilmu ekonomi. Kelemahan ini tampak ketika…",
      options: [
        "Pemikirannya didominasi metode kuantitatif.",
        "Ekonomi masih bercampur dengan politik, hukum, dan etika.",
        "Mereka sudah memahami teori permintaan-penawaran.",
        "Mereka hanya fokus pada distribusi kekayaan individu."
      ],
      answer: "Ekonomi masih bercampur dengan politik, hukum, dan etika."
    },
    {
      question: "Jika kamu diminta merancang sistem ekonomi hibrida berdasarkan pemikiran pra-klasik untuk negara berkembang saat ini, maka strategi yang paling tepat adalah…",
      options: [
        "Meningkatkan akumulasi devisa dengan ekspor besar-besaran tanpa memperhatikan produksi pangan.",
        "Menghapus semua bentuk intervensi negara dalam perdagangan internasional.",
        "Mengombinasikan proteksi industri strategis (merkantilisme) dengan modernisasi pertanian (fisiokrat) serta etika harga adil (Aquinas).",
        "Menjadikan logam mulia sebagai satu-satunya ukuran keberhasilan ekonomi."
      ],
      answer: "Mengombinasikan proteksi industri strategis (merkantilisme) dengan modernisasi pertanian (fisiokrat) serta etika harga adil (Aquinas)."
    }
  ];

  totalSpan.textContent = questions.length;

  startBtn.addEventListener('click', () => {
    errorMsg.style.display = 'none';
    const nama = namaInput.value.trim();
    const email = emailInput.value.trim();
    const nim = nimInput.value.trim();
    const kelas = kelasInput.value.trim();

    if (!nama || !email || !nim || !kelas) {
      showError('Semua kolom harus diisi.');
      return;
    }
    if (!validateEmail(email)) {
      showError('Email tidak valid.');
      return;
    }
    if (nim.length < 8) {
      showError('NIM minimal 8 karakter.');
      return;
    }

    studentData = { nama, email, nim, kelas };
    startPage.style.display = 'none';
    quizContainer.style.display = 'flex';
    currentQuestionIndex = 0;
    score = 0;
    wrong = 0;
    userAnswers = [];
    isReviewMode = false;
    feedback.textContent = '';
    reviewNav.style.display = 'none';
    showQuestion();
  });

  function showError(msg) {
    errorMsg.textContent = msg;
    errorMsg.style.display = 'block';
  }

  function validateEmail(email) {
    const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    return re.test(email);
  }

  function showQuestion() {
    if (isReviewMode) return;
    const q = questions[currentQuestionIndex];
    questionText.textContent = `Soal ${currentQuestionIndex + 1} dari ${questions.length}: ${q.question}`;
    optionsContainer.innerHTML = '';
    feedback.textContent = '';

    q.options.forEach(option => {
      const btn = document.createElement('button');
      btn.className = 'option-btn';
      btn.textContent = option;
      btn.addEventListener('click', () => checkAnswer(option, q.answer));
      optionsContainer.appendChild(btn);
    });
  }

  function checkAnswer(selected, correct) {
    if (isReviewMode) return;
    const buttons = optionsContainer.querySelectorAll('.option-btn');
    buttons.forEach(b => b.disabled = true);

    userAnswers.push(selected);

    if (selected === correct) {
      feedback.textContent = 'Jawaban Benar!';
      feedback.className = 'feedback correct';
      score++;
    } else {
      feedback.textContent = `Jawaban Salah. Yang benar adalah "${correct}".`;
      feedback.className = 'feedback incorrect';
      wrong++;
    }

    setTimeout(() => {
      currentQuestionIndex++;
      if (currentQuestionIndex >= questions.length) {
        showResult();
      } else {
        showQuestion();
      }
    }, 1500);
  }

  function showResult() {
    quizContainer.style.display = 'none';
    resultContainer.style.display = 'block';
    scoreSpan.textContent = score;
    wrongSpan.textContent = wrong;
    submissionStatus.textContent = 'Menyimpan data...';
    submitScore();
  }

  function submitScore() {
    fetch(WEB_APP_URL, {
      method: 'POST',
      body: new URLSearchParams({
        nama: studentData.nama,
        email: studentData.email,
        nim: studentData.nim,
        kelas: studentData.kelas,
        skor: score
      })
    })
    .then(res => {
      if (!res.ok) throw new Error('Gagal mengirim data');
      return res.text();
    })
    .then(data => {
      submissionStatus.textContent = 'Data berhasil disimpan!';
      submissionStatus.style.color = '#28a745';
    })
    .catch(err => {
      submissionStatus.textContent = 'Gagal mengirim data. Coba lagi.';
      submissionStatus.style.color = '#dc3545';
      console.error(err);
    });
  }

  reviewBtn.addEventListener('click', () => {
    isReviewMode = true;
    resultContainer.style.display = 'none';
    quizContainer.style.display = 'block';
    reviewNav.style.display = 'flex';
    currentQuestionIndex = 0;
    showReviewQuestion();
  });

  restartBtn.addEventListener('click', () => {
    isReviewMode = false;
    currentQuestionIndex = 0;
    score = 0;
    wrong = 0;
    userAnswers = [];
    feedback.textContent = '';
    reviewNav.style.display = 'none';
    resultContainer.style.display = 'none';
    startPage.style.display = 'block';
    namaInput.value = '';
    emailInput.value = '';
    nimInput.value = '';
    kelasInput.value = '';
    submissionStatus.textContent = '';
  });

  prevBtn.addEventListener('click', () => {
    if (currentQuestionIndex > 0) {
      currentQuestionIndex--;
      showReviewQuestion();
    }
  });

  nextBtn.addEventListener('click', () => {
    if (currentQuestionIndex < questions.length - 1) {
      currentQuestionIndex++;
      showReviewQuestion();
    }
  });

  function showReviewQuestion() {
    const q = questions[currentQuestionIndex];
    questionText.textContent = `Soal ${currentQuestionIndex + 1} dari ${questions.length}: ${q.question}`;
    optionsContainer.innerHTML = '';
    feedback.textContent = '';

    q.options.forEach(option => {
      const btn = document.createElement('button');
      btn.className = 'option-btn';
      btn.textContent = option;
      btn.disabled = true;

      if (option === q.answer) {
        btn.classList.add('correct-answer');
      }
      if (option === userAnswers[currentQuestionIndex] && option !== q.answer) {
        btn.classList.add('incorrect-answer');
      }
      optionsContainer.appendChild(btn);
    });

    prevBtn.disabled = currentQuestionIndex === 0;
    nextBtn.disabled = currentQuestionIndex === questions.length - 1;
  }
</script>
</body>
</html>
